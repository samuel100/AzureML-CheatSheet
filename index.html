


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="more/aml.Default">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.4.0">
    
    
      
        <title>Azure ML Cheat Sheet</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.fe0cca5b.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#azure-ml-cheat-sheet" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="." title="Azure ML Cheat Sheet" class="md-header-nav__button md-logo" aria-label="Azure ML Cheat Sheet">
      
  <img src="more/aml.Default" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Azure ML Cheat Sheet
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Cheatsheet
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Azure ML Cheat Sheet" class="md-nav__button md-logo" aria-label="Azure ML Cheat Sheet">
      
  <img src="more/aml.Default" alt="logo">

    </a>
    Azure ML Cheat Sheet
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Cheatsheet
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="." title="Cheatsheet" class="md-nav__link md-nav__link--active">
      Cheatsheet
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#basics" class="md-nav__link">
    Basics
  </a>
  
    <nav class="md-nav" aria-label="Basics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#workspace" class="md-nav__link">
    Workspace
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datastore" class="md-nav__link">
    Datastore
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compute-targets" class="md-nav__link">
    Compute Targets
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-scripts-in-aml" class="md-nav__link">
    Running Scripts in AML
  </a>
  
    <nav class="md-nav" aria-label="Running Scripts in AML">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#experiments" class="md-nav__link">
    Experiments
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scriptrunconfig" class="md-nav__link">
    ScriptRunConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environments-running-scripts" class="md-nav__link">
    Environments (Running Scripts)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environments" class="md-nav__link">
    Environments
  </a>
  
    <nav class="md-nav" aria-label="Environments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#environment" class="md-nav__link">
    Environment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="vs-code-snippets/snippets/" title="VS Code Snippets" class="md-nav__link">
      VS Code Snippets
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="templates/" title="Templates" class="md-nav__link">
      Templates
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#basics" class="md-nav__link">
    Basics
  </a>
  
    <nav class="md-nav" aria-label="Basics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#workspace" class="md-nav__link">
    Workspace
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datastore" class="md-nav__link">
    Datastore
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compute-targets" class="md-nav__link">
    Compute Targets
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-scripts-in-aml" class="md-nav__link">
    Running Scripts in AML
  </a>
  
    <nav class="md-nav" aria-label="Running Scripts in AML">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#experiments" class="md-nav__link">
    Experiments
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scriptrunconfig" class="md-nav__link">
    ScriptRunConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environments-running-scripts" class="md-nav__link">
    Environments (Running Scripts)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environments" class="md-nav__link">
    Environments
  </a>
  
    <nav class="md-nav" aria-label="Environments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#environment" class="md-nav__link">
    Environment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <h1 id="azure-ml-cheat-sheet">Azure ML Cheat Sheet</h1>
<h2 id="basics">Basics</h2>
<h4 id="workspace"><a href="more/workspace/">Workspace</a></h4>
<p>Instantiate workspace.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">azureml.core</span> <span class="kn">import</span> <span class="n">Workspace</span>
<span class="n">ws</span> <span class="o">=</span>  <span class="n">Workspace</span><span class="o">.</span><span class="n">from_config</span><span class="p">()</span>
</code></pre></div>

<p><em><a href="vs-code-snippets/snippets#create-aml-workspace-from-config">VS Code snippet</a></em></p>
<p>Workspaces are a foundational object used throughout AML and are used in the constructors of many other classes. In the following examples we frequently omit the workspace object instantiation and simply refer to <code>ws</code>.</p>
<p>See the <a href="more/workspace/">workspaces</a> page for more ways to instantiate a workspace.</p>
<h4 id="datastore"><a href="more/datastore/">Datastore</a></h4>
<p>Each workspace comes with a default datastore.</p>
<div class="highlight"><pre><span></span><code><span class="n">ds</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">get_default_datastore</span><span class="p">()</span>
</code></pre></div>

<p>Any datastore that is registered to workspace can be accessed by name</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">azureml.core</span> <span class="kn">import</span> <span class="n">Datastore</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">Datastore</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="s2">&quot;&lt;name-of-registered-datastore&gt;&quot;</span><span class="p">)</span>
</code></pre></div>

<p>To register a store via a SAS token:</p>
<p><div class="highlight"><pre><span></span><code><span class="n">ds</span> <span class="o">=</span> <span class="n">Datastore</span><span class="o">.</span><span class="n">register_azure_blob_container</span><span class="p">(</span>
    <span class="n">workspace</span><span class="o">=</span><span class="n">ws</span><span class="p">,</span>
    <span class="n">datastore_name</span><span class="o">=</span><span class="s2">&quot;&lt;datastore-name&gt;&quot;</span><span class="p">,</span>
    <span class="n">container_name</span><span class="o">=</span><span class="s2">&quot;&lt;container-name&gt;&quot;</span><span class="p">,</span>
    <span class="n">account_name</span><span class="o">=</span><span class="s2">&quot;&lt;account-name&gt;&quot;</span><span class="p">,</span>
    <span class="n">sas_token</span><span class="o">=</span><span class="s2">&quot;&lt;sas-token&gt;&quot;</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>
<em><a href="vs-code-snippets/snippets#register-azure-blob-container-from-sas">VS Code snippet</a></em></p>
<p>For more ways authentication options and for different underlying storage see the AML documentation on <a href="https://docs.microsoft.com/en-us/python/api/azureml-core/azureml.core.datastore(class)?view=azure-ml-py">Datastores</a>.</p>
<h4 id="compute-targets"><a href="more/compute-targets/">Compute Targets</a></h4>
<p>Compute targets are an AML abstraction around the concept of a compute resource ranging from your local machine to an (auto-scaling) cluster of Azure VMs.</p>
<p>To use an existing compute target:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">azureml.core</span> <span class="kn">import</span> <span class="n">ComputeTarget</span>
<span class="n">compute_target</span> <span class="o">=</span> <span class="n">ComputeTarget</span><span class="p">(</span><span class="n">workspace</span><span class="o">=</span><span class="n">ws</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;&lt;compute-name&gt;&quot;</span><span class="p">)</span>
</code></pre></div>

<p>For example, to create a new cluster of between 0 and 4 "Standard_NC24rs_v3" VMs,</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">azureml.core</span> <span class="kn">import</span> <span class="n">ComputeTarget</span>
<span class="kn">from</span> <span class="nn">azureml.core.compute</span> <span class="kn">import</span> <span class="n">AmlCompute</span>
<span class="n">compute_config</span> <span class="o">=</span> <span class="n">AmlCompute</span><span class="o">.</span><span class="n">provisioning_configuration</span><span class="p">(</span>
    <span class="n">vm_size</span><span class="o">=</span><span class="s2">&quot;Standard_NC24rs_v3&quot;</span><span class="p">,</span>
    <span class="n">min_nodes</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">max_nodes</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">compute_target</span> <span class="o">=</span> <span class="n">ComputeTarget</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="s2">&quot;&lt;compute-name&gt;&quot;</span><span class="p">,</span> <span class="n">compute_config</span><span class="p">)</span>
<span class="n">compute_target</span><span class="o">.</span><span class="n">wait_for_completion</span><span class="p">(</span><span class="n">show_output</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p>See the <a href="more/compute-targets/">Compute Targets</a> page for more examples.</p>
<h2 id="running-scripts-in-aml">Running Scripts in AML</h2>
<p>This section shows how to run a script on AML. Suppose you are in possession of a script <code>primes.py</code>.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># primes.py</span>
<span class="kn">import</span> <span class="nn">argparse</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--upper&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Find all primes below this.&quot;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

<span class="n">numbers</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">upper</span><span class="p">))</span>
<span class="k">for</span> <span class="n">prime</span> <span class="ow">in</span> <span class="n">numbers</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">prime</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">continue</span>
    <span class="k">elif</span> <span class="n">prime</span> <span class="o">&gt;</span> <span class="n">args</span><span class="o">.</span><span class="n">upper</span> <span class="o">**</span> <span class="mf">0.5</span><span class="p">:</span>
        <span class="k">break</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">prime</span> <span class="o">**</span> <span class="mi">2</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">upper</span><span class="p">,</span> <span class="n">prime</span><span class="p">):</span>
        <span class="n">numbers</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="nb">print</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">numbers</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">])</span>
</code></pre></div>

<h4 id="experiments">Experiments</h4>
<p>An experiment is used as an organizational principle, storing run history and tracking metrics.</p>
<p>Get or create an experiment:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">azureml.core</span> <span class="kn">import</span> <span class="n">Experiment</span>
<span class="n">exp</span> <span class="o">=</span> <span class="n">Experiment</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="s2">&quot;&lt;experiment-name&gt;&quot;</span><span class="p">)</span>
</code></pre></div>

<p>Use experiments to submit run configurations (see <a href="#scriptrunconfig">ScriptRunConfig</a> section):</p>
<div class="highlight"><pre><span></span><code><span class="n">run</span> <span class="o">=</span> <span class="n">exp</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</code></pre></div>

<h4 id="scriptrunconfig">ScriptRunConfig</h4>
<p>A typical directory may have the following structure:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># run.py</span>
<span class="kn">from</span> <span class="nn">azureml.core</span> <span class="kn">import</span> <span class="n">Workspace</span><span class="p">,</span> <span class="n">Experiment</span><span class="p">,</span> <span class="n">ScriptRunConfig</span>

<span class="c1"># get workspace</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">Workspace</span><span class="o">.</span><span class="n">from_config</span><span class="p">()</span>

<span class="c1">#  get/create experiment</span>
<span class="n">exp</span> <span class="o">=</span> <span class="n">Experiment</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="s1">&#39;Primes&#39;</span><span class="p">)</span>

<span class="c1"># set up script run configuration</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">ScriptRunConfig</span><span class="p">(</span>
    <span class="n">source_directory</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">,</span>
    <span class="n">script</span><span class="o">=</span><span class="s1">&#39;primes.py&#39;</span><span class="p">,</span>
    <span class="n">arguments</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;--upper&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span>
<span class="p">)</span>

<span class="c1"># submit script to AML</span>
<span class="n">run</span> <span class="o">=</span> <span class="n">exp</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">get_portal_url</span><span class="p">())</span> <span class="c1"># link to ml.azure.com</span>
</code></pre></div>

<p>This example assumes that <code>primes.py</code> is in the current working directory.</p>
<p>In this example since no compute target was specified the script is running on local compute i.e., it runs on
the machine that kicked off the job. We can get this code to run remotely in Azure by giving it a compute
target.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># set up script run configuration</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">ScriptRunConfig</span><span class="p">(</span>
    <span class="n">source_directory</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">,</span>
    <span class="n">script</span><span class="o">=</span><span class="s1">&#39;primes.py&#39;</span><span class="p">,</span>
    <span class="n">arguments</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;--upper&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span>
<span class="p">)</span>

<span class="n">config</span><span class="o">.</span><span class="n">run_config</span><span class="o">.</span><span class="n">target</span> <span class="o">=</span> <span class="s2">&quot;&lt;name-of-compute-target&gt;&quot;</span>

<span class="n">exp</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</code></pre></div>

<h4 id="environments-running-scripts">Environments (Running Scripts)</h4>
<p>In the scenario that your script requires certain python libraries to run you can provide an AML environment object
(see <a href="#environments">Environments</a> section) to the <code>ScriptRunConfig</code></p>
<div class="highlight"><pre><span></span><code><span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="s1">&#39;&lt;environment-name&gt;&#39;</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">run_config</span><span class="o">.</span><span class="n">environment</span> <span class="o">=</span> <span class="n">env</span>
</code></pre></div>

<h2 id="environments">Environments</h2>
<h4 id="environment"><a href="more/environment/">Environment</a></h4>
<p>We can use a Conda/pip to define AML environments.</p>
<div class="tabbed-set" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">Conda (env.yml)</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code># env.yml
name: my-env
channels:
    - defaults
    - conda-forge
dependencies:
    - numpy
    - pandas
    - scipy
    - scikit-learn
    - pip
    - python=3.6
    - jupyter
    - ipykernel
    - pip:
        - azureml-sdk==1.8.0
        - torch
        - transformers==2.11.0
</code></pre></div>

</div>
<input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><label for="__tabbed_1_2">pip (requirements.txt)</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code># requirement.txt
azureml-dataprep==1.8.3
azureml-sdk==1.8.0
flake8==3.7.9
numpy==1.18.5
pycodestyle==2.5.0
torch==1.5.1
tqdm==4.48.0
transformers==2.11.0
</code></pre></div>

</div>
</div>
<p>to create and register an AML environment that can be cached, versioned and reused between different experiments, runs and compute targets.</p>
<p>Create the AML environment</p>
<div class="tabbed-set" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><label for="__tabbed_2_1">Conda</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">azureml.core</span> <span class="kn">import</span> <span class="n">Environment</span>

<span class="n">my_env</span> <span class="o">=</span> <span class="n">Environment</span><span class="o">.</span><span class="n">from_conda_specification</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;&lt;environment-name&gt;&#39;</span><span class="p">,</span>
    <span class="n">file_path</span><span class="o">=</span><span class="s1">&#39;&lt;path-to-env.yml&gt;&#39;</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

</div>
<input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><label for="__tabbed_2_2">pip</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">azureml.core</span> <span class="kn">import</span> <span class="n">Environment</span>

<span class="n">my_env</span> <span class="o">=</span> <span class="n">Environment</span><span class="o">.</span><span class="n">from_pip_specification</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;&lt;environment-name&gt;&#39;</span><span class="p">,</span>
    <span class="n">file_path</span><span class="o">=</span><span class="s1">&#39;&lt;path-to-requirements.txt&gt;&#39;</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

</div>
</div>
<p>To register this environment with the workspace</p>
<div class="highlight"><pre><span></span><code><span class="n">my_env</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">ws</span><span class="p">)</span>
</code></pre></div>

<p>To view all environments registered to a workspace</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">azureml.core</span> <span class="kn">import</span> <span class="n">Environment</span>
<span class="n">registered_environments</span> <span class="o">=</span> <span class="n">Environment</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="n">ws</span><span class="p">)</span>
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
        
          <a href="vs-code-snippets/snippets/" title="VS Code Snippets" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                VS Code Snippets
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="assets/javascripts/vendor.d710d30a.min.js"></script>
      <script src="assets/javascripts/bundle.b39636ac.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: ".",
          features: [],
          search: Object.assign({
            worker: "assets/javascripts/worker/search.a68abb33.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      
    
  </body>
</html>